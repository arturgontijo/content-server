{% extends "layout.html" %}
{% block title %}Services{% endblock %}

{% block counter %}
<span class="pull-right-container">
    {% if content_list %}
      <small class="label label-primary pull-left">{{ content_list[-1]["queue_pos"] }}</small>
    {% endif %}
    <small class="label label-success pull-left">{{ content_list|length }}</small>
</span>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div class="box-header">
          <h3 class="box-title">Content Delivery Table</h3>
        </div>
       <!-- /.box-header -->
        <div class="box-body">
          <table id="content_table" class="table table-bordered table-striped">
            <thead>
              <tr>
                <th class="text-center">UID</th>
                <th class="text-center">Service</th>
                <th class="text-center">ContentID</th>
                <th class="text-center">Creation</th>
                <th class="text-center">Queue</th>
                <th class="text-center">Expiration</th>
                <th class="text-center">Response</th>
              </tr>
            </thead>
            <tbody>
                {% for item in content_list %}
                    <tr>
                      <td class="text-center">{{ item["uid"] }}</td>
                      <td class="text-center">{{ item["service"] }}</td>
                      <td class="text-center">{{ item["content_id"].split("#")[-1] }}</td>
                      <td class="text-center">{{ item["date"] }}</td>
                      <td class="text-center">{{ item["queue_pos"] }}</td>
                      <td class="text-center">{{ item["expiration"] }}</td>
                      {% if item["content_type"] == "url" %}
                        <td class="text-center"><a type="button" href='{{ item["content"] }}' class='{{ item["button_class"] }}'>{{ item["status"] }}</a></td>
                      {% else %}
                        <td class="text-center">{{ item["content"] }}</td>
                      {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
          </table>
        </div>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->
    </div>
</div>
{% endblock %}

{% block scripts %}
  <script>
    $(function () {
      $('#content_table').DataTable( {
        "order": [[ 3, "asc" ]]
    } );
    })
  </script>
{% endblock %}